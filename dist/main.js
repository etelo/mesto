(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var t=function(){function t(e,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._data=e,this._selectors=n,this._template=document.querySelector(n.template),this._card=this._template.content.querySelector(this._selectors.element).cloneNode(!0),this._handleClicImage=o}var n,o;return n=t,(o=[{key:"createElement",value:function(){return this._elementTitle=this._card.querySelector(this._selectors.elementTitle),this._elementImage=this._card.querySelector(this._selectors.elementImage),this._elementDelete=this._card.querySelector(this._selectors.elementDelete),this._elementLike=this._card.querySelector(this._selectors.elementLike),this._setEventListeners(),this._elementTitle.textContent=this._data.name,this._elementImage.alt=this._data.name,this._elementImage.src=this._data.link,this._card}},{key:"_setEventListeners",value:function(){var e=this;this._elementImage.addEventListener("click",(function(){return e._handleClicImage(e._data.name,e._data.link)})),this._elementDelete.addEventListener("click",(function(){return e._handleClickDeleteCard()})),this._elementLike.addEventListener("click",(function(){return e._handleClickLike()}))}},{key:"_handleClickDeleteCard",value:function(){this._card.remove()}},{key:"_handleClickLike",value:function(){this._elementLike.classList.toggle(this._selectors.elementLikeActive)}}])&&e(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),t}();function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r,i=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"_showInputError",(function(e,t){r._errorElement=r._formElement.querySelector(".".concat(e.id,"-error")),e.classList.add(r._selectorsForms.inputError),r._errorElement.textContent=t,r._errorElement.classList.add(r._selectorsForms.inputErrorActive)})),o(this,"_hideInputError",(function(e){r._errorElement=r._formElement.querySelector(".".concat(e.id,"-error")),e.classList.remove(r._selectorsForms.inputError),r._errorElement.classList.remove(r._selectorsForms.inputErrorActive),r._errorElement.textContent=""})),o(this,"_checkInputValidity",(function(e){e.validity.valid?r._hideInputError(e):r._showInputError(e,e.validationMessage)})),o(this,"_hasInvalidInput",(function(e){return e.some((function(e){return!e.validity.valid}))})),o(this,"_toggleButtonState",(function(){r._hasInvalidInput(r._inputList)?r._disableButton():(r._buttonElement.classList.remove(r._selectorsForms.inactiveButtonClass),r._buttonElement.disabled=!1)})),o(this,"_setEventListeners",(function(){r._toggleButtonState(),r._inputList.forEach((function(e){e.addEventListener("input",(function(){r._checkInputValidity(e),r._toggleButtonState()}))}))})),o(this,"_disableButton",(function(){r._buttonElement.classList.add(r._selectorsForms.inactiveButtonClass),r._buttonElement.disabled=!0})),o(this,"_setInputListeners",(function(){r._formElement.addEventListener("submit",(function(e){e.preventDefault(),r._disableButton()})),r._setEventListeners()})),this._selectorsForms=t,this._selectorPopUpForm=n,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(t.inputSelector)),this._buttonElement=this._formElement.querySelector(this._selectorsForms.submitButtonSelector)}var t,r;return t=e,(r=[{key:"enableValidation",value:function(){this._setInputListeners()}},{key:"resetValidation",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){e._hideInputError(t)}))}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),p={profileTitle:".profile__title",profileSubtitle:".profile__subtitle",profileEdit:".profile__edit-button",profileAdd:".profile__add-button",list:".elements__list",template:".template",element:".element",elementTitle:".element__title",elementImage:".element__image",elementDelete:".element__delete",elementLike:".element__like",elementLikeActive:"element__like_active",popup:".popup",popupOpened:"popup_opened",popupOpenedclass:".popup_opened",popupButtonClose:"popup__close-btn",popupEdit:".popup_type_edit-profile",popupEditForm:".popup__form",popupEditProfileForm:".popup__form_edit-profile",popupEditButtonClose:".popup__close-btn",popupEditInputName:".popup__input-name",popupEditInputJob:".popup__input-job",popupAdd:".popup_type_add-card",popupAddForm:".popup__form_add-card",popupAddClosed:".popup__close-btn",popupAddSubmit:".popup__button-submit",popupAddInputPlace:".popup__input-place",popupAddInputPicture:".popup__input-picture",popupImage:".popup_type_image",popupImageClosed:".popup__image-closed",popupImageImg:".popup__image-img",popupImageTxt:".popup__image-txt"},l=document.querySelector(p.profileTitle),u=document.querySelector(p.profileSubtitle),s=document.querySelector(p.profileEdit),a=document.querySelector(p.profileAdd),c=document.querySelector(p.list),d=(document.querySelector(p.template).content.querySelector(p.element),document.querySelector(p.popupEdit)),m=d.querySelector(p.popupEditForm),_=(d.querySelector(p.popupEditButtonClose),d.querySelector(p.popupEditInputName)),f=d.querySelector(p.popupEditInputJob),h=document.querySelector(p.popupAdd),v=h.querySelector(p.popupAddForm),y=(h.querySelector(p.popupAddClosed),h.querySelector(p.popupAddSubmit),h.querySelector(p.popupAddInputPlace)),E=h.querySelector(p.popupAddInputPicture),b=document.querySelector(p.popupImage),g=(b.querySelector(p.popupImageClosed),b.querySelector(p.popupImageImg)),S=b.querySelector(p.popupImageTxt),k={};r={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button-submit",inactiveButtonClass:"button_inactive",inputError:"popup__input_type_error",inputErrorActive:"popup__input-error_active"},Array.from(document.querySelectorAll(r.formSelector)).forEach((function(e){var t=new i(r,e),n=e.getAttribute("name");k[n]=t,t.enableValidation()}));var L=function(e,t){g.src=t,g.alt=e,S.textContent=e,C(b)};function I(e,n){var o=new t(e,p,L);n.prepend(o.createElement())}[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){return I(e,c)})),document.querySelectorAll(p.popup).forEach((function(e){e.addEventListener("mousedown",(function(t){(t.target.classList.contains(p.popupOpened)||t.target.classList.contains(p.popupButtonClose))&&0===t.button&&A(e)}))}));var q=function(e){"Escape"===e.key&&A(document.querySelector(p.popupOpenedclass))};function C(e){e.classList.add(p.popupOpened),document.addEventListener("keydown",q)}function A(e){e.classList.remove(p.popupOpened),document.removeEventListener("keydown",q)}a.addEventListener("click",(function(){C(h)})),v.addEventListener("submit",(function(e){I({name:y.value,link:E.value},c),e.target.reset(),A(h)})),m.addEventListener("submit",(function(e){e.preventDefault(),l.textContent=_.value,u.textContent=f.value,A(d)})),s.addEventListener("click",(function(){var e=d.querySelector(p.popupEditForm).name;k[e].resetValidation(),C(d),_.value=l.textContent,f.value=u.textContent}))})();